<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>OmniTools AI - Free Multi Model</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {margin:0;font-family:Arial;background:#0f172a;color:white;display:flex;height:100vh;}
.sidebar {width:260px;background:#020617;padding:20px;display:flex;flex-direction:column;}
.sidebar h2 {color:#00d2ff;}
.sidebar button {margin:5px 0;padding:8px;border:none;border-radius:6px;cursor:pointer;}
.main {flex:1;display:flex;flex-direction:column;}
header {padding:15px;background:#111827;display:flex;justify-content:space-between;}
.chat {flex:1;overflow:auto;padding:20px;display:flex;flex-direction:column;}
.bubble {max-width:70%;padding:12px;border-radius:10px;margin:5px 0;}
.user {align-self:flex-end;background:#00d2ff;color:black;}
.bot {align-self:flex-start;background:#1e293b;}
.input-area {padding:15px;background:#111827;display:flex;}
textarea {flex:1;padding:10px;border-radius:8px;border:none;}
.send {margin-left:10px;padding:10px 15px;background:#00d2ff;border:none;border-radius:8px;cursor:pointer;}
.modal {position:fixed;inset:0;background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center;}
.modal-box {background:white;color:black;padding:20px;border-radius:12px;width:400px;max-width:90%;}
input,select,textarea {width:100%;margin:5px 0;padding:8px;}
</style>
</head>

<body>

<div class="sidebar">
<h2>OmniTools AI</h2>
<button onclick="openSettings()">âš™ Settings</button>
<button onclick="logout()">ðŸšª Logout</button>
<div style="margin-top:auto;font-size:12px;color:#888;">Free AI Gateway</div>
</div>

<div class="main">
<header>
<div id="userDisplay">Not Logged In</div>
<button onclick="toggleTheme()">ðŸŒ“</button>
</header>

<div class="chat" id="chat"></div>

<div class="input-area">
<textarea id="msg" rows="1" placeholder="Type message..."></textarea>
<button class="send" onclick="sendMessage()">Send</button>
</div>
</div>

<!-- SETTINGS MODAL -->
<div class="modal" id="settingsModal">
<div class="modal-box">
<h3>AI Settings</h3>

<label>Select Model</label>
<select id="modelSelect">
<option value="nvidia/nemotron-3-nano-30b-a3b:free">Nemotron 30B</option>
<option value="deepseek/deepseek-r1:free">DeepSeek R1</option>
<option value="z-ai/glm-4.5-air:free">GLM 4.5 Air</option>
<option value="openai/gpt-4o-mini">GPT-4o Mini</option>
</select>

<label>OpenRouter API Key</label>
<input type="password" id="openrouterKey">

<label>OpenAI API Key</label>
<input type="password" id="openaiKey">

<label>System Prompt</label>
<textarea id="systemPrompt">You are a helpful AI assistant.</textarea>

<button onclick="saveSettings()">Save</button>
<button onclick="closeSettings()">Cancel</button>

</div>
</div>

<script>
let user = localStorage.getItem("user");

if(!user){
user = prompt("Enter your name:");
if(user){
localStorage.setItem("user",user);
}
}

document.getElementById("userDisplay").innerText="Active: "+user;

function addBubble(text,type){
const div=document.createElement("div");
div.className="bubble "+type;
div.innerHTML=text;
document.getElementById("chat").appendChild(div);
document.getElementById("chat").scrollTop=999999;
}

function openSettings(){
document.getElementById("settingsModal").style.display="flex";
let s=JSON.parse(localStorage.getItem("settings")||"{}");
document.getElementById("modelSelect").value=s.model||"nvidia/nemotron-3-nano-30b-a3b:free";
document.getElementById("openrouterKey").value=s.openrouter||"";
document.getElementById("openaiKey").value=s.openai||"";
document.getElementById("systemPrompt").value=s.prompt||"You are a helpful AI assistant.";
}

function closeSettings(){
document.getElementById("settingsModal").style.display="none";
}

function saveSettings(){
let settings={
model:document.getElementById("modelSelect").value,
openrouter:document.getElementById("openrouterKey").value,
openai:document.getElementById("openaiKey").value,
prompt:document.getElementById("systemPrompt").value
};
localStorage.setItem("settings",JSON.stringify(settings));
alert("Saved");
closeSettings();
}

async function sendMessage(){
let message=document.getElementById("msg").value;
if(!message) return;
addBubble(message,"user");
document.getElementById("msg").value="";

let settings=JSON.parse(localStorage.getItem("settings")||"{}");
if(!settings.model){
alert("Configure settings first.");
return;
}

let reply="";

if(settings.model.includes("/")){

if(!settings.openrouter){
alert("OpenRouter API key missing");
return;
}

let res=await fetch("https://openrouter.ai/api/v1/chat/completions",{
method:"POST",
headers:{
"Content-Type":"application/json",
"Authorization":"Bearer "+settings.openrouter
},
body:JSON.stringify({
model:settings.model,
messages:[
{role:"system",content:settings.prompt},
{role:"user",content:message}
]
})
});

let data=await res.json();
reply=data.choices?.[0]?.message?.content||"Error";

}else{

if(!settings.openai){
alert("OpenAI key missing");
return;
}

let res=await fetch("https://api.openai.com/v1/chat/completions",{
method:"POST",
headers:{
"Content-Type":"application/json",
"Authorization":"Bearer "+settings.openai
},
body:JSON.stringify({
model:settings.model,
messages:[
{role:"system",content:settings.prompt},
{role:"user",content:message}
]
})
});

let data=await res.json();
reply=data.choices?.[0]?.message?.content||"Error";
}

addBubble(reply,"bot");
}

function logout(){
localStorage.clear();
location.reload();
}

function toggleTheme(){
if(document.body.style.background=="white"){
document.body.style.background="#0f172a";
document.body.style.color="white";
}else{
document.body.style.background="white";
document.body.style.color="black";
}
}
</script>

</body>
</html>
